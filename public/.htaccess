
# Enable rewrite engine
RewriteEngine On

# Serve sitemap and robots files directly
RewriteRule ^sitemap\.xml$ sitemap.xml [L,T=application/xml]
RewriteRule ^sitemap-production\.xml$ sitemap-production.xml [L,T=application/xml]
RewriteRule ^robots\.txt$ robots.txt [L,T=text/plain]

# Handle client routing for everything else
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/(sitemap.*\.xml|robots\.txt)$
RewriteRule . /index.html [L]

# Set proper MIME types for XML files
<Files "sitemap.xml">
    Header set Content-Type "application/xml; charset=utf-8"
    Header set Cache-Control "public, max-age=3600"
</Files>

<Files "sitemap-production.xml">
    Header set Content-Type "application/xml; charset=utf-8"
    Header set Cache-Control "public, max-age=3600"
</Files>

<Files "robots.txt">
    Header set Content-Type "text/plain; charset=utf-8"
</Files>

# Ensure XML files are served correctly
AddType application/xml .xml
